{% extends 'Base.html' %}
{% load static %}

{% block title %}
  <title>CUCC | Gear | Hire</title>
{% endblock %}

{% block main-content %}
  <h1>Gear Hire</h1>

  <form method="POST">
  {% csrf_token %}

    {% if perms.Gear.hire_other %}
    <div style="position:fixed; bottom:0; left:25%; right:25%;">
      <div class="w3-theme-d4 w3-card-4 w3-center">
        <div class="w3-mobile w3-block w3-center">
          Sign out on behalf of:
        </div>
        <select class="w3-input w3-mobile w3-block w3-center" name="user">
          {% for u in user_list %}
            <option value="{{ u.user_key }}"{% if u == user %} selected{%endif%}>{{ u.full_name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    {% else %}
      <input type="hidden" name="user" value="{{ user.user_key }}">
    {% endif %}


  <h2>Ropes</h2>
  {% if rope_list %}
    <table class="w3-table w3-table-all w3-striped w3-card">
    <tr class="w3-theme-d3">
      <th>Length</th>
      <th>Diameter</th>
      <th>Year</th>
      <th>Notes</th>
      <th>Signed Out By</th>
      <th></th>
    </tr>
    {% for item in rope_list %}
      {% if item.available %}
        <tr id="rope:{{ item.pk }}" class="w3-green">
          <td>{{ item.length }}</td>
          <td>{{ item.diameter }}</td>
          <td>{{ item.purchased_year }}</td>
          <td>{{ item.notes }}</td>
          <td>Available</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign Out" formaction="{% url 'RopeSignOut' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" href="{% url 'EditRope' pk=item.pk %}" style="width:100px">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" href="{% url 'DeleteRope' pk=item.pk %}" style="width:100px">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% else %}
        <tr id="rope:{{ item.pk }}" class="w3-red">
          <td>{{ item.length }}</td>
          <td>{{ item.diameter }}</td>
          <td>{{ item.purchased_year }}</td>
          <td>{{ item.notes }}</td>
          <td>{% for hire in item.hirerope_set.all %}{% if hire.signed_in == None %}{{ hire.signed_out_by.full_name }}{% endif %}{% endfor %}</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign In" formaction="{% url 'RopeSignIn' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditRope' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteRope' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% endif %}
    {% endfor %}
    </table>
  {% else %}
    <p>No Ropes Found</p>
  {% endif %}

  <h2>Helmets</h2>
  {% if helmet_list %}
    <table class="w3-table w3-table-all w3-striped w3-card">
    <tr class="w3-theme-d3">
      <th>UID</th>
      <th>Year</th>
      <th>Notes</th>
      <th>Signed Out By</th>
      <th></th>
    </tr>
    {% for item in helmet_list %}
      {% if item.available %}
        <tr id="helmet:{{ item.pk }}" class="w3-green">
          <td>{{ item.uid }}</td>
          <td>{{ item.purchased_year }}</td>
          <td>{{ item.notes }}</td>
          <td>Available</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign Out" formaction="{% url 'HelmetSignOut' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditHelmet' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteHelmet' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% else %}
        <tr id="helmet:{{ item.pk }}" class="w3-red">
          <td>{{ item.uid }}</td>
          <td>{{ item.purchased_year }}</td>
          <td>{{ item.notes }}</td>
          <td>{% for hire in item.hirehelmet_set.all %}{% if hire.signed_in == None %}{{ hire.signed_out_by.full_name }}{% endif %}{% endfor %}</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign In" formaction="{% url 'HelmetSignIn' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditHelmet' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteHelmet' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% endif %}
    {% endfor %}
    </table>
  {% else %}
    <p>No Helmets Found</p>
  {% endif %}

  <h2>SRT Kits</h2>
  {% if srtkit_list %}
    <table class="w3-table w3-table-all w3-striped w3-card">
    <tr class="w3-theme-d3">
      <th>Colours</th>
      <th>Notes</th>
      <th>Signed Out By</th>
      <th></th>
    </tr>
    {% for item in srtkit_list %}
      {% if item.available %}
        <tr id="srt:{{ item.pk }}" class="w3-green">
          <td>{{ item.colour_code }}</td>
          <td>{{ item.notes }}</td>
          <td>Available</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign Out" formaction="{% url 'SRTKitSignOut' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditSRTKit' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteSRTKit' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% else %}
        <tr id="srt:{{ item.pk }}" class="w3-red">
          <td>{{ item.colour_code }}</td>
          <td>{{ item.notes }}</td>
          <td>{% for hire in item.hiresrtkit_set.all %}{% if hire.signed_in == None %}{{ hire.signed_out_by.full_name }}{% endif %}{% endfor %}</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign In" formaction="{% url 'SRTKitSignIn' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditSRTKit' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteSRTKit' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% endif %}
    {% endfor %}
    </table>
  {% else %}
    <p>No SRT Kits Found</p>
  {% endif %}

  <h2>Harnesses</h2>
  {% if harness_list %}
    <table class="w3-table w3-table-all w3-striped w3-card">
    <tr class="w3-theme-d3">
      <th>UID</th>
      <th>Year</th>
      <th>Notes</th>
      <th>Signed Out By</th>
      <th></th>
    </tr>
    {% for item in harness_list %}
      {% if item.available %}
        <tr id="harness:{{ item.pk }}" class="w3-green">
          <td>{{ item.uid }}</td>
          <td>{{ item.purchased_year }}</td>
          <td>{{ item.notes }}</td>
          <td>Available</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign Out" formaction="{% url 'HarnessSignOut' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditHarness' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteHarness' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% else %}
        <tr id="harness:{{ item.pk }}" class="w3-red">
          <td>{{ item.uid }}</td>
          <td>{{ item.purchased_year }}</td>
          <td>{{ item.notes }}</td>
          <td>{% for hire in item.hireharness_set.all %}{% if hire.signed_in == None %}{{ hire.signed_out_by.full_name }}{% endif %}{% endfor %}</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign In" formaction="{% url 'HarnessSignIn' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditHarness' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteHarness' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% endif %}
    {% endfor %}
    </table>
  {% else %}
    <p>No Harnesses Found</p>
  {% endif %}

  <h2>Undersuits</h2>
  {% if undersuit_list %}
    <table class="w3-table w3-table-all w3-striped w3-card">
    <tr class="w3-theme-d3">
      <th>UID</th>
      <th>Size</th>
      <th>Notes</th>
      <th>Signed Out By</th>
      <th></th>
    </tr>
    {% for item in undersuit_list %}
      {% if item.available %}
        <tr id="undersuit:{{ item.pk }}" class="w3-green">
          <td>{{ item.uid }}</td>
          <td>{{ item.size }}</td>
          <td>{{ item.notes }}</td>
          <td>Available</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign Out" formaction="{% url 'UndersuitSignOut' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditUndersuit' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteUndersuit' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% else %}
        <tr id="undersuit:{{ item.pk }}" class="w3-red">
          <td>{{ item.uid }}</td>
          <td>{{ item.size }}</td>
          <td>{{ item.notes }}</td>
          <td>{% for hire in item.hireundersuit_set.all %}{% if hire.signed_in == None %}{{ hire.signed_out_by.full_name }}{% endif %}{% endfor %}</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign In" formaction="{% url 'UndersuitSignIn' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditUndersuit' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteUndersuit' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
           </div>
             {% endif %}
          </td>
        </tr>
      {% endif %}
    {% endfor %}
    </table>
  {% else %}
    <p>No Undersuits Found</p>
  {% endif %}

  <h2>Oversuits</h2>
  {% if oversuit_list %}
    <table class="w3-table w3-table-all w3-striped w3-card">
    <tr class="w3-theme-d3">
      <th>UID</th>
      <th>Size</th>
      <th>Notes</th>
      <th>Signed Out By</th>
      <th></th>
    </tr>
    {% for item in oversuit_list %}
      {% if item.available %}
        <tr id="oversuit:{{ item.pk }}" class="w3-green">
          <td>{{ item.uid }}</td>
          <td>{{ item.size }}</td>
          <td>{{ item.notes }}</td>
          <td>Available</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign Out" formaction="{% url 'OversuitSignOut' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditOversuit' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteOversuit' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
            </div>
          {% endif %}
          </td>
        </tr>
      {% else %}
        <tr id="oversuit:{{ item.pk }}" class="w3-red">
          <td>{{ item.uid }}</td>
          <td>{{ item.size }}</td>
          <td>{{ item.notes }}</td>
          <td>{% for hire in item.hireoversuit_set.all %}{% if hire.signed_in == None %}{{ hire.signed_out_by.full_name }}{% endif %}{% endfor %}</td>
          <td class="w3-right">
            {% if perms.Gear.hire_self %}
            <div class="w3-dropdown-hover w3-mobile" style="width:100px; min-width:100px">
             <input type="submit" class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:100px" value="Sign In" formaction="{% url 'OversuitSignIn' pk=item.pk %}">
             <div class="w3-dropdown-content w3-card-4" style="width:100px; min-width:100px">
               {% if perms.Gear.register_gear %}
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'EditOversuit' pk=item.pk %}">Edit</a>
               <a class="w3-button w3-theme-d4 w3-hover-black" style="width:100px"  href="{% url 'DeleteOversuit' pk=item.pk %}">Delete</a>
               {% endif %}
             </div>
             </div>
             {% endif %}
          </td>
        </tr>
      {% endif %}
    {% endfor %}
    </table>
  {% else %}
    <p>No Oversuits Found</p>
  {% endif %}

  <h2>Other Gear</h2>
  {% if othergear_list %}
    <table class="w3-table w3-table-all w3-striped w3-card">
      <tr class="w3-theme-d3">
        <th>Name</th>
        <th>Notes</th>
        <th>On Loan</th>
        <th>Available</th>
        <th></th>
      </tr>
      {% for item in othergear_list %}
        <tr id="other:{{ item.pk }}" class="w3-green">
          <td>{{ item.name }}</td>
          <td>{{ item.notes }}</td>
          <td>{{ item.on_loan }}/{{ item.quantity }}</td>
          <td>{{ item.available }}/{{ item.quantity }}</td>
          <td class="w3-right">
            <div class="w3-bar">
                {% if perms.Gear.hire_self %}
                <div class="w3-dropdown-hover w3-mobile" style="width:200px; min-width:200px">
                 <span class="w3-button w3-mobile w3-theme-d4 w3-hover-black" style="width:200px">Sign Out / In</span>
                 <div class="w3-dropdown-content w3-card-4" style="width:200px; min-width:200px">
                   {% if item.available != 0 %}
                     <input class="w3-bar-item" style="width:100px" type="number" name="amount_out_{{ item.pk }}" min="0" max="{{ item.available }}" value=0>
                     <input class="w3-bar-item w3-button w3-theme-d4 w3-hover-black" style="width:100px" type="submit" value="Sign Out" formaction="{% url 'OtherGearSignOut' pk=item.pk %}">
                   {% endif %}
                   {% if item.on_loan != 0 %}
                     <input class="w3-bar-item" style="width:100px" type="number" name="amount_in_{{ item.pk }}" min="0" max="{{ item.on_loan }}" value=0>
                     <input style="width:100px" class="w3-bar-item w3-button w3-theme-d4 w3-hover-black" type="submit" value="Sign In" formaction="{% url 'OtherGearSignIn' pk=item.pk %}">
                   {% endif %}
                   {% if perms.Gear.register_gear %}
                     <a class="w3-button w3-theme-d4 w3-hover-black" style="width:200px"  href="{% url 'EditOtherGear' pk=item.pk %}">Edit</a>
                     <a class="w3-button w3-theme-d4 w3-hover-black" style="width:200px"  href="{% url 'DeleteOtherGear' pk=item.pk %}">Delete</a>
                   {% endif %}
                 </div>
                </div>
              {% endif %}
            </div>
          </td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>No Other Gear Found</p>
  {% endif %}

</form>

{% endblock %}

{% block side-content %}
  {% include 'ActionSets/Gear.html' %}
{% endblock %}
